---
import MainLayout from '../../layouts/MainLayout.astro';
import GradientOverlay2 from '@/components/ui/GradientOverlay2.astro';
import Button from '@/components/ui/Button.astro';
import { getCollection } from 'astro:content';
import type { CollectionEntry } from 'astro:content';
import { Image } from 'astro:assets';
import Rectangle from '@/images/shapes/rectangle-1.png';

// Background images
import backgroundImage from '@/images/service-hero-image.jpg';
import DiagonalArrowAccent from '@/images/icons/diagonal-arrow-accent.png';

const services: CollectionEntry<'services'>[] = (
  await getCollection('services')
).sort((a, b) => (a.data.order ?? 0) - (b.data.order ?? 0));

const title = 'Our Services - dar.dev';
const description =
  'Explore our comprehensive range of software development services including web applications, mobile apps, consulting, automation, and more.';

const ISPARTOF = {
  '@type': 'Organization',
  name: 'Dar.Dev',
  url: 'https://dar.dev',
};
---

<MainLayout
  title={title}
  structuredData={{
    '@context': 'https://schema.org',
    '@type': 'WebPage',
    '@id': 'https://dar.dev/services',
    url: 'https://dar.dev/services',
    name: title,
    description: description,
    isPartOf: ISPARTOF,
    inLanguage: 'en-US',
  }}
  meta={description}
>
  <!-- Hero Section -->
  <section class="relative min-h-40 w-full overflow-hidden md:min-h-140">
    <!-- Background Image -->
    <div class="absolute inset-0 z-0">
      <Image
        src={backgroundImage}
        alt="Our Services"
        class="h-full w-full object-cover"
        loading="eager"
      />
    </div>

    <!-- Gradient Overlay -->
    <GradientOverlay2 />

    <!-- Hero Content -->
    <div class="relative z-20 flex min-h-200 items-center">
      <div class="container mx-auto px-4 py-20 lg:px-8">
        <div class="max-w-4xl space-y-6">
          <!-- Heading -->
          <h1 class="font-headline text-5xl font-bold text-white lg:text-7xl">
            Our
            <span class="text-accent">Services</span>
          </h1>

          <Image
            src={Rectangle}
            alt="Decorative Rectangle"
            class="w-full max-w-140"
          />

          <!-- Description -->
          <p class="font-supporting max-w-140 text-lg text-gray-300 lg:text-xl">
            Dar.Dev provides focused services that cover the full lifecycle of a
            software productâ€”from structure and design to development and
            infrastructure. Each service works independently, or together as a
            complete system.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Services Grid Section -->
  <section class="bg-deep relative z-20 pb-40">
    <div class="container mx-auto px-4 lg:px-8">
      <!-- Services Grid -->
      <div class="flex flex-wrap justify-center gap-4 sm:gap-6 xl:gap-8">
        {
          services.map((service) => (
            <a
              href={`/services/${service.id}`}
              class="group hover:border-accent hover:bg-dark/30 relative flex aspect-square w-[calc(50%-0.5rem)] flex-col items-center justify-center border-2 border-white p-4 transition-all duration-300 sm:w-[calc(50%-0.75rem)] sm:p-6 md:w-[calc(33.333%-1rem)] lg:w-[calc(25%-1.125rem)] lg:p-8 xl:w-[calc(25%-1.5rem)]"
            >
              {/* Service Icon */}
              <div class="mb-3 h-10 w-10 sm:mb-4 sm:h-12 sm:w-12 lg:mb-6 lg:h-16 lg:w-16">
                <Image
                  src={service.data.icon}
                  alt={`${service.data.title} icon`}
                  class="h-full w-full object-contain transition-transform duration-300 group-hover:scale-110"
                />
              </div>

              {/* Service Title */}
              <h3 class="font-headline text-center text-base font-semibold text-white sm:text-lg lg:text-xl">
                {service.data.title}
              </h3>
            </a>
          ))
        }
      </div>
    </div>
  </section>
</MainLayout>
